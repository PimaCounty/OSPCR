function startLoading(n){kendo.ui.progress($(n),!0);let t=$(n).height();t=t/2+$(n).offset().top;t=t-$(window).height()/2;window.scrollTo(0,t)}function stopLoading(n){kendo.ui.progress($(n),!1)}function createResourceGrid(){var f=$("#resourceGrid").data("readResourcesUrl"),e=$("#resourceGrid").data("updateResourceUrl"),o=$("#resourceGrid").data("createResourceUrl"),s=$("#resourceGrid").data("readTypeUrl"),h=$("#resourceGrid").data("readClassUrl"),c=$("#resourceGrid").data("readStatusUrl"),l=$("#resourceGrid").data("readDistrictUrl"),a=$("#resourceGrid").data("readZoneUrl"),n=new kendo.data.DataSource({transport:{read:{type:"GET",dataType:"json",url:s,cache:!1}}}),t=new kendo.data.DataSource({transport:{read:{type:"GET",dataType:"json",url:h,cache:!1}}}),v=new kendo.data.DataSource({transport:{read:{type:"GET",dataType:"json",url:c,cache:!1}}}),i=new kendo.data.DataSource({transport:{read:{type:"GET",dataType:"json",url:l,cache:!1}}}),y=new kendo.data.DataSource({transport:{read:{type:"GET",dataType:"json",url:a,cache:!1}}}),r=$("#resourceGrid").kendoGrid({dataSource:{transport:{read:{type:"GET",dataType:"json",url:f,cache:!1},update:{type:"POST",dataType:"json",url:e,cache:!1},create:{type:"POST",dataType:"json",url:o,cache:!1}},autoSync:!1,schema:{model:{id:"ResourceId",fields:{ResourceId:{},ResourceName:{validation:{required:!0}},YearDesignated:{},ResourceTypeId:{},ResourceTypeName:{},DesignatedStatus:{},ModifiedDate:{editable:!1},GISId:{type:"text"}}}},requestEnd:function(n){n.type!=="read"&&this.read()},requestStart:function(){startLoading("#allcontent")}},columns:[{field:"ResourceId",title:"Resource ID",hidden:!0},{field:"ResourceName",title:"Resource Name",sortable:!0,filterable:{extra:!1,operators:{string:{contains:"Contains",isempty:"Empty"}}}},{field:"YearDesignated",title:"Year Designated"},{field:"ResourceTypeName",title:"Resource Type",sortable:!0,filterable:{multi:!0,search:!0},editor:function(t,i){$('<input required name="'+i.field+'"/>').appendTo(t).kendoAutoComplete({dataSource:n,filter:"startswith",dataTextField:"Name",value:i.model.ResourceTypeId,template:kendo.template($("#autotemplate").html()),change:function(){for(var i=this.value(),t=this.dataSource.data(),n=0;n<t.length;n++)if(t[n].Name.trim()==i)return!0;return this.value(""),!1}})}},{field:"DesignationStatusName",title:"Designation Status",sortable:!0,filterable:{multi:!0,search:!0},editor:function(n,t){$('<input required name="'+t.field+'"/>').appendTo(n).kendoAutoComplete({dataSource:v,filter:"startswith",dataTextField:"Name",value:t.model.DesignatedStatusId,template:kendo.template($("#autotemplate").html()),change:function(){for(var i=this.value(),t=this.dataSource.data(),n=0;n<t.length;n++)if(t[n].Name.trim()==i)return!0;return this.value(""),!1}})}},{field:"GISId",title:"GIS ID",sortable:!0,editable:function(){return $("#userName").data("admin")==="True"}},{field:"ModifiedDate",title:"Modified",template:function(n){return n.ModifiedDate==null||n.ModifiedDate==""?"":new Date(n.ModifiedDate).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})},editable:!1,width:90},{command:[{name:"edit",text:"Edit"},{name:"deactivate",text:"Deactivate"}],title:"&nbsp",width:100,hidden:$("#userName").data("read")==="True"}],editable:!0,toolbar:[{template:kendo.template($("#toolBarTemplateWrite").html())}],autoBind:!1,filterable:!0,scrollable:!1,sortable:!0,dataBound:onDataBound,detailTemplate:kendo.template($("#resourcedetailtemplate").html()),detailInit:function(n){alert("detail init....");alert(n.data.ParentSensitivityZoneName);var f=n.data.id,r=n.data.ResourceId.toString().trim().toLowerCase(),u=n.detailRow;u.find(".resourcedesc")[0].id="resourcedesc"+r;u.find(".resourceclasslist")[0].id="resourceclasslist"+r;u.find(".primarysite")[0].id="primarysite"+r;u.find(".parentdistrict")[0].id="parentdistrict"+r;u.find(".sensitivityzone")[0].id="sensitivityzone"+r;r!==null&&r!==""&&($("#resourcedesc"+r).val(n.data.ResourceDescription),$("#resourceclasslist"+r).val(n.data.ResourceClassName),$("#primarysite"+r).val(n.data.PrimaryASMSiteNumber),$("#parentdistrict"+r).val(n.data.ParentDistrictName),$("#sensitivityzone"+r).val(n.data.ParentSensitivityzone));u.find(".resourcetabstrip")[0].id="resourcetabstrip"+r;$("#resourcetabstrip"+r).kendoTabStrip({dataTextField:"Name"});u.find(".resourceclasslist").kendoDropDownList({dataSource:t,dataTextField:"Name",dataValueField:"Id",value:n.data.ResourceClassId,enable:!1,edit:!0,select:function(n){n.dataItem.Active||(removeFromDropDown("#resourceclasslist"+r,n.dataItem.Id),n.preventDefault())},dataBound:function(){removeFromDropDown("#resourceclasslist"+r)},template:kendo.template($("#dropDownTemplate").html())});u.find(".parentdistrict").kendoAutoComplete({dataSource:i,dataTextField:"Name",dataValueField:"Id",value:n.data.ParentDistrictName,enable:!1,edit:!0,select:function(n){n.dataItem.Active||(removeFromDropDown("#parentdistrict"+r,n.dataItem.Id),n.preventDefault())},dataBound:function(){removeFromDropDown("#parentdistrict"+r)},template:kendo.template($("#autotemplate").html())});u.find(".sensitivityzone").kendoAutoComplete({dataSource:y,dataTextField:"Name",dataValueField:"Id",value:n.data.ParentSensitivityZoneName,enable:!1,edit:!0,select:function(n){n.dataItem.Active||(removeFromDropDown("#sensitivityzone"+r,n.dataItem.Id),n.preventDefault())},dataBound:function(){removeFromDropDown("#sensitivityzone"+r)},template:kendo.template($("#autotemplate").html())})},edit:function(n){var i,t;n.sender.expandRow(n.container);i=n.model.ResourceId.toString().trim().toLowerCase();alert(i);alert("hit edit function..."+n.model.uid);t=$("#resourcetabstrip"+i).data("kendoTabStrip");t.select(0);t.disable(t.tabGroup.children().eq(1));t.disable(t.tabGroup.children().eq(2));t.disable(t.tabGroup.children().eq(3));$("#resourceclasslist"+i).data("kendoDropDownList").enable(!0);$("#parentdistrict"+i).data("kendoAutoComplete").enable(!0);$("#sensitivityzone"+i).data("kendoAutoComplete").enable(!0);$("tr[data-uid='"+n.model.uid+"'] .k-hierarchy-cell").html("")},save:function(n){alert("hit save...");var t=$("#resourceclasslist"+n.model.ResourceId).data("kendoDropDownList");alert("value: "+t.value());n.model.ResourceClassId=t.value();alert("updating resource class..."+n.model.ResourceClassId)},cancel:function(n){n.sender.dataSource.read()}}),u;$("#userName").data("read")==="False"&&r.data("kendoGrid").setOptions({toolbar:[{template:kendo.template($("#toolBarTemplateWrite").html())}],editable:"inline"});u=r.data("kendoGrid").dataSource;u.read().then(function(){t.read();n.read();i.read()})}function toggleEditAgencies(n){setTimeout(function(){for(var i,r=$("input[type='radio'][name='"+n+"']"),t=0;t<r.length;t++)r[t].disabled=!1;for(i=$('button[name="'+n+'"]'),t=0;t<i.length;t++)i[t].disabled=!1},800)}function removeFromDropDown(n){setTimeout(function(){var r=$(n).data("kendoDropDownList"),i,t;if(r.dataSource!="undefined")for(i=r.dataSource.data(),t=0;t<i.length;t++)i[t]==undefined||i[t].Active||r.dataSource.remove(i[t])},200)}function onDataBound(n){var t=n.sender,i=getParameterByName("resourceId"),r,u;i!=null&&(r=t.dataSource.get(i),u=$("[data-uid='"+r.uid+"']",t.tbody),t.select(u))}function getParameterByName(n){var t=RegExp("[?&]"+n+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))}async function setHelloWorldText(){const n="World";try{const i=await fetch(`/api/Default/GetHelloWorld?name=${n}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});let t;if(!i.ok){console.log("Error occurred");return}t=await i.json();t.length>0&&$("#helloworld").text(t)}catch(t){console.log(t)}}function createKendoGrid(){$("#kendogrid").kendoGrid({dataSource:[{technology:"Kendo UI",resource:"http://docs.telerik.com/kendo-ui/api/javascript/class"},{technology:"Bootstrap",resource:"https://www.w3schools.com/bootstrap/"},{technology:"Entity Framework Core",resource:"https://docs.microsoft.com/en-us/ef/"},{technology:"Serilog",resource:"https://serilog.net/"},{technology:"Git",resource:"https://git-scm.com/about"},{technology:"",resource:""}],columns:[{field:"technology",title:"Technology"},{field:"resource",title:"Resource"}]})}function createContactDialog(){$("#contactinfo").kendoDialog({closable:!1,title:!1,visible:!1})}function setEnvironmentBanner(){var i=window.location.hostname,n="",t=!1;i.indexOf("localhost")!=-1?(n="LOCAL DEV",t=!0):i.indexOf("DEV-SERVER-HOSTNAME")!=-1?(n="DEV",t=!0):i.indexOf("TEST-SERVER-HOSTNAME")!=-1&&(n="TEST",t=!0);t&&($("#environmentDescriptorWrapper").removeClass("hidebanner"),$("#environmentDescriptor").text(n))}$(document).ready(()=>{setEnvironmentBanner(),$(document).ajaxStart(()=>{startLoading("#allcontent")}),$(document).ajaxStop(()=>{stopLoading("#allcontent")}),$(".card-header").click(()=>{let n=$(this).find("span").attr("id");$(this).find("span").toggleClass("glyphicons-plus glyphicons-minus");$("span").each(()=>{$(this).hasClass("glyphicons glyphicons-bold")&&$(this).attr("id")!=n&&$(this).removeClass().addClass("glyphicons glyphicons-bold glyphicons-plus float-right")})})});$(document).ready(function(){createResourceGrid()});$(document).ready(()=>{setHelloWorldText(),createKendoGrid()}),function(n,t,i,r,u,f,e){n.GoogleAnalyticsObject=u;n[u]=n[u]||function(){(n[u].q=n[u].q||[]).push(arguments)};n[u].l=1*new Date;f=t.createElement(i);e=t.getElementsByTagName(i)[0];f.async=1;f.src=r;e.parentNode.insertBefore(f,e)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga");$(document).ready(function(){createContactDialog();$(".panel-collapse").on("show.bs.collapse",function(){$(this).parent().find(".glyphicons").removeClass("glyphicons-plus").addClass("glyphicons-minus")});$(".panel-collapse").on("hide.bs.collapse",function(){$(this).parent().find(".glyphicons").removeClass("glyphicons-minus").addClass("glyphicons-plus")});$(document).on("click",".contact-icon",function(){$("#contactinfo").data("kendoDialog").open()});$(document).on("click",".k-overlay",function(){$("#contactinfo").data("kendoDialog").close()});$("body").scrollspy({target:".bs-docs-sidebar",offset:40})});